(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{23:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t(2),c=t.n(a),o=t(17),u=t.n(o),i=(t(23),t(3)),s=t.n(i),d=t(4),p=t(7),b=t(5),f=t(6),j=t.n(f),l="/api/",v=function(){var e=Object(d.a)(s.a.mark((function e(n){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/api//persons",n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(s.a.mark((function e(n){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.put(l+"/persons/".concat(n.id),n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.delete("/api//persons/"+n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O=function(e){var n=e.id,t=e.name,a=e.number,c=e.onRemoved;return Object(r.jsxs)("p",{children:[t," ",a,Object(r.jsx)("button",{onClick:function(){window.confirm("remove ".concat(t,"?"))&&c(n)},children:"Remove"})]})},x=function(e){var n=e.onPersonCreated,t=Object(a.useState)(""),c=Object(b.a)(t,2),o=c[0],u=c[1],i=Object(a.useState)(""),s=Object(b.a)(i,2),d=s[0],p=s[1];return Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n({name:o,number:d}),u(""),p("")},children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{onChange:function(e){return u(e.target.value)},value:o})]}),Object(r.jsxs)("div",{children:["number:"," ",Object(r.jsx)("input",{onChange:function(e){return p(e.target.value)},value:d})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){var n=e.filter,t=e.setFilter;return Object(r.jsxs)(r.Fragment,{children:["Search: ",Object(r.jsx)("input",{onChange:function(e){return t(e.target.value)},value:n})]})},w=function(e){var n=e.persons,t=e.onRemoved;return n.map((function(e){return Object(a.createElement)(O,Object(p.a)(Object(p.a)({},e),{},{key:e.name,onRemoved:t}))}))},k=function(e){var n=e.message,t=e.isGood?"green":"red",a={borderColor:t,borderWidth:"3px",borderStyle:"solid",background:"grey",margin:"1em",color:t,padding:"0.3em"};return Object(r.jsx)("div",{style:a,children:n})},y=function(){var e=Object(a.useState)([]),n=Object(b.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),u=Object(b.a)(o,2),i=u[0],f=u[1],l=Object(a.useState)(null),O=Object(b.a)(l,2),y=O[0],C=O[1];Object(a.useEffect)((function(){j.a.get("/api//persons").then((function(e){return e.data})).then((function(e){return c(e)}))}),[]);var S=function(e,n){C({message:e,isGood:n}),setTimeout((function(){return C(null)}),5e3)},F=function(){var e=Object(d.a)(s.a.mark((function e(n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(r=t.find((function(e){return e.name==n.name})))){e.next=18;break}if(window.confirm("".concat(n.name," already exists. Update?"))){e.next=4;break}return e.abrupt("return");case 4:return n.id=r.id,e.prev=5,e.next=8,h(n);case 8:a=e.sent,c((function(e){return e.map((function(e){return e.id===a.id?a:e}))})),S("Updated ".concat(a.name),!0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),S("Updating person ".concat(n.id," failed"),!1);case 16:e.next=29;break;case 18:return e.prev=18,e.next=21,v(n);case 21:a=e.sent,c(t.concat(a)),S("Added ".concat(a.name),!0),e.next=29;break;case 26:e.prev=26,e.t1=e.catch(18),S("Failed adding person: ".concat(e.t1),!1);case 29:console.log({newPerson:n,newPersonServer:a});case 30:case"end":return e.stop()}}),e,null,[[5,13],[18,26]])})));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(n);case 3:c((function(e){return e.filter((function(e){return e.id!==n}))})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),S("Removing person ".concat(n," failed"),!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n){return e.apply(this,arguments)}}(),R=t.filter((function(e){return e.name.toLowerCase().includes(i.toLowerCase())}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),y?Object(r.jsx)(k,Object(p.a)({},y)):null,Object(r.jsx)(x,{onPersonCreated:F}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(g,{filter:i,setFilter:f}),Object(r.jsx)(w,{persons:R,onRemoved:P})]})},C=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,44)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),r(e),a(e),c(e),o(e)}))};u.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(y,{})}),document.getElementById("root")),C()}},[[43,1,2]]]);
//# sourceMappingURL=main.94a4a881.chunk.js.map